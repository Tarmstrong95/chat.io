(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,n){},104:function(e,n){},112:function(e,n,t){"use strict";t.r(n);var o=t(0),i=t.n(o),c=t(42),r=t.n(c),a=(t(55),t(43)),l=t(44),s=t(49),u=t(48),m=(t(56),t(17),t(45),t(46)),d=t.n(m),f=t(47),p=t.n(f),g=function(e){Object(s.a)(t,e);var n=Object(u.a)(t);function t(e){var o;return Object(a.a)(this,t),(o=n.call(this,e)).sendStream=function(e){o.socket.emit("stream",e)},o.client={},o.socket=d()("https://cum-io.herokuapp.com/"),o}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.client,n=this.socket,t=document.querySelector("#main");navigator.mediaDevices.getUserMedia({video:{width:200,height:200},audio:!0}).then((function(o){function i(e){var n=new p.a({initiator:"init"===e,stream:o,trickle:!1});return n.on("stream",(function(e){console.log("streaming"),function(e){console.log("create Video");var n=document.createElement("video");n.id="peerVideo",n.srcObject=e,document.querySelector("#peer-container").appendChild(n),n.play()}(e)})),n.on("close",(function(){document.getElementById("peerVideo").remove(),n.destroy()})),n}n.emit("NewClient"),t.srcObject=o,t.play(),n.on("BackendOffer",(function(e){var t=i("notInit");t.on("signal",(function(e){return n.emit("Answer",e)})),t.signal(e)})),n.on("BackendAnswer",(function(n){e.gotAnswer=!0,e.peer.signal(n)})),n.on("SessionActive",(function(){document.write("Session Active. Please come back later")})),n.on("CreatePeer",(function(){console.log("making peer"),e.gotAnswer=!1;var t=i("init");console.log(t),t.on("signal",(function(t){console.log(t),e.gotAnswer||n.emit("Offer",t)})),e.peer=t})),n.on("Disconnect",(function(){console.log(e),console.log("disconnecting");var n=document.querySelector("#peerVideo");n&&document.querySelector("#peer-container").removeChild(n)}))})).catch((function(e){return document.write(e)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Socket.io Chat App"),i.a.createElement("div",{id:"peer-container"},i.a.createElement("video",{id:"main",muted:!0})))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,n,t){e.exports=t(112)},55:function(e,n,t){},56:function(e,n,t){},86:function(e,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.d1cf7acf.chunk.js.map