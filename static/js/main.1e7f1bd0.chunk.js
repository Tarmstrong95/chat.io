(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,n){},102:function(e,n){},110:function(e,n,t){"use strict";t.r(n);var o=t(0),i=t.n(o),c=t(41),r=t.n(c),a=(t(53),t(42)),s=t(43),l=t(47),u=t(46),m=(t(54),t(44)),d=t.n(m),p=t(45),f=t.n(p),g=function(e){Object(l.a)(t,e);var n=Object(u.a)(t);function t(e){var o;return Object(a.a)(this,t),(o=n.call(this,e)).sendStream=function(e){o.socket.emit("stream",e)},o.client={},o.socket=d()("https://cum-io.herokuapp.com/"),o.state={users:0},o.streamConstraints={video:{width:window.innerWidth,height:window.innerHeight},audio:!0},o}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.client,n=this.socket,t=document.querySelector("#main");navigator.mediaDevices.getUserMedia(this.streamConstraints).then((function(o){function i(e){var n=new f.a({initiator:"init"===e,stream:o,trickle:!1});return n.on("stream",(function(e){console.log("streaming"),function(e){console.log("create Video");var n=document.createElement("video");n.id="peerVideo",n.className="peer",n.srcObject=e,document.querySelector("#peer-container").appendChild(n),n.play()}(e)})),n.on("close",(function(){document.getElementById("peerVideo").remove(),n.destroy()})),n}n.emit("NewClient"),t.srcObject=o,t.play();n.on("BackendOffer",(function(e){var t=i("notInit");t.on("signal",(function(e){return n.emit("Answer",e)})),t.signal(e)})),n.on("BackendAnswer",(function(n){e.gotAnswer=!0,e.peer.signal(n)})),n.on("SessionActive",(function(){document.write("Session Active. Please come back later")})),n.on("CreatePeer",(function(){console.log("making peer"),e.gotAnswer=!1;var t=i("init");console.log(t),t.on("signal",(function(t){console.log(t),e.gotAnswer||n.emit("Offer",t)})),e.peer=t})),n.on("Disconnect",(function(){console.log(e),console.log("disconnecting");var n=document.querySelector("#peerVideo");n&&document.querySelector("#peer-container").removeChild(n)}))})).catch((function(e){return document.write(e)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Socket.io Chat App"),i.a.createElement("p",null,"Users active: ",this.state.users),i.a.createElement("div",{id:"peer-container"},i.a.createElement("video",{id:"main",muted:!0})))}}]),t}(i.a.Component);r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(g,null)),document.getElementById("root"))},48:function(e,n,t){e.exports=t(110)},53:function(e,n,t){},54:function(e,n,t){},84:function(e,n){}},[[48,1,2]]]);
//# sourceMappingURL=main.1e7f1bd0.chunk.js.map